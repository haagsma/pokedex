<p-sidebar [showCloseIcon]="false"  [style]="{paddingTop: '30px'}" [(visible)]="battlePanel" [fullScreen]="true" class="battle-panel" [baseZIndex]="800">
    <div class="arena">
        <div class="ui-g">
            <div class="ui-g-7 right">
                <div class="life-panel box-shadow">
                    <div class="ui-g center">
                        <div class="ui-g-7">
                            <span class="captalize text-black bold f12">
                                {{oponent?.pokemon?.pokemon?.name || ''}}
                                <img class="img-12" *ngIf="oponent && oponent.pokemon && oponent.pokemon.burned" src="/assets/icon/effects/fire.png" />
                                <img class="img-12" *ngIf="oponent && oponent.pokemon && oponent.pokemon.paralized" src="/assets/icon/effects/electric.png" />
                                <img class="img-12" *ngIf="oponent && oponent.pokemon && oponent.pokemon.freezed" src="/assets/icon/effects/ice.png" />
                                <img class="img-12" *ngIf="oponent && oponent.pokemon && oponent.pokemon.poisoned" src="/assets/icon/effects/poison.png" />
                                <img class="img-12" *ngIf="oponent && oponent.pokemon && oponent.pokemon.sleeping" src="/assets/icon/effects/sleep.png" />
                            </span>
                        </div>
                        <div class="ui-g-5">
                            <span class="captalize text-black bold f12">Lv: {{oponent?.pokemon?.level || ''}}</span>
                        </div>
                    </div>
                    <div class="m-auto w-80">
                        <span style="padding-right: 5px;float: left;font-size: 10px" class="bold">HP: </span>
                        <p-progressBar [style]="{marginTop: '4px'}" class="life-bar" [value]="((100/oponent?.pokemon?.maxHp)*oponent?.pokemon?.hp)"></p-progressBar>
                        <p class="f12">{{oponent?.pokemon?.hp}} / {{oponent?.pokemon?.maxHp}}</p>
                    </div>
                </div>
            </div>
            <div class="ui-g-5 right">
                <img class="pokemon-in-battle" src="/assets/pokemons/{{oponent?.pokemon?.pokemon?.num || '001'}}.png">
            </div>
            <div class="ui-g-5 left">
                <img class="pokemon-in-battle" src="/assets/pokemons/{{challenger?.pokemon?.pokemon?.num || '001'}}.png">
            </div>
            <div class="ui-g-7 left">
                <div class="life-panel box-shadow">
                    <div class="ui-g center">
                        <div class="ui-g-7">
                            <span class="captalize text-black bold f12">
                                {{challenger?.pokemon?.pokemon?.name || ''}}
                                <img class="img-12" *ngIf="challenger && challenger.pokemon && challenger.pokemon.burned" src="/assets/icon/effects/fire.png" />
                                <img class="img-12" *ngIf="challenger && challenger.pokemon && challenger.pokemon.paralized" src="/assets/icon/effects/electric.png" />
                                <img class="img-12" *ngIf="challenger && challenger.pokemon && challenger.pokemon.freezed" src="/assets/icon/effects/ice.png" />
                                <img class="img-12" *ngIf="challenger && challenger.pokemon && challenger.pokemon.poisoned" src="/assets/icon/effects/poison.png" />
                                <img class="img-12" *ngIf="challenger && challenger.pokemon && challenger.pokemon.sleeping" src="/assets/icon/effects/sleep.png" />
                            </span>
                        </div>
                        <div class="ui-g-5">
                            <span class="captalize text-black bold f12">Lv: {{challenger?.pokemon?.level || ''}}</span>
                        </div>
                    </div>
                    <div class="m-auto w-80">
                        <span style="padding-right: 5px;float: left;font-size: 10px" class="bold">HP: </span>
                        <p-progressBar [style]="{marginTop: '4px'}" class="life-bar" [value]="((100/challenger?.pokemon?.maxHp)*challenger?.pokemon?.hp)"></p-progressBar>
                        <p class="f12">{{challenger?.pokemon?.hp}} / {{challenger?.pokemon?.maxHp}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="down-panel">
        <div class="ui-g">
            <div class="ui-g-6 center">
                <button pButton *ngIf="!attacking" (click)="attackPanels.toggle($event)" class="ui-button-danger ui-button-rounded box-shadow" label="Atacar"></button>
                <button pButton *ngIf="attacking" class="ui-button-danger ui-button-rounded box-shadow" label="Atacar"></button>
            </div>
            <div class="ui-g-6 center">
                <button (click)="pokemonPanel = true" pButton class="ui-button-rounded box-shadow" label="Pokemon"></button>
            </div>
            <div class="ui-g-6 center">
                <button (click)="itemsPanel = true" pButton class="ui-button-success ui-button-rounded box-shadow" label="Items"></button>
            </div>
            <div class="ui-g-6 center">
                <button [disabled]="gym" pButton (click)="leave()" class="ui-button-gray ui-button-rounded box-shadow" label="Fugir"></button>
            </div>
        </div>
    </div>
</p-sidebar>
<p-overlayPanel #attackPanels [style]="{'width': '100%'}" [baseZIndex]="900" >
    <div class="ui-g">
        <div *ngIf="challenger?.pokemon?.move1" class="ui-g-6 center">
            <a (click)="attack(challenger?.pokemon?.move1, attackPanels);" >
                <btn-ataque [move]="challenger.pokemon.move1 || {type: {name: ''}}" ></btn-ataque>
                <!--<p class="uppercase">{{challenger?.pokemon?.move1?.name}}</p>-->
                <!--<small>Power: {{challenger?.pokemon?.move1?.power || 0}}</small><br>-->
                <!--<small>Accuracy: {{challenger?.pokemon?.move1?.accuracy || 0}}</small><br>-->
                <!--<small>Type: {{challenger?.pokemon?.move1?.type?.name}}</small>-->
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move2" class="ui-g-6 center">
            <a  (click)="attack(challenger?.pokemon?.move2, attackPanels);" >
                <btn-ataque [move]="challenger.pokemon.move2 || {type: {name: ''}}" ></btn-ataque>
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move3" class="ui-g-6 center">
            <a  (click)="attack(challenger?.pokemon?.move3, attackPanels);" >
                <btn-ataque [move]="challenger.pokemon.move3 || {type: {name: ''}}" ></btn-ataque>
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move4" class="ui-g-6 center">
            <a (click)="attack(challenger?.pokemon?.move4, attackPanels);">
                <btn-ataque [move]="challenger.pokemon.move4 || {type: {name: ''}}" ></btn-ataque>
            </a>
        </div>
    </div>
</p-overlayPanel>
<p-dialog [(visible)]="pokemonPanel" [baseZIndex]="900" [closeIcon]="false">
    <div class="ui-g">
        <div *ngFor="let p of challenger.team" class="ui-g-4 choose center">
            <a *ngIf="p.hp > 0" (click)="changePokemon(p)">
                <img class="pokemon-pokedex" src="/assets/pokemons/{{p.pokemon.num}}.png" />
            </a>
            <a *ngIf="p.hp <= 0">
                <img class="pokemon-pokedex" src="/assets/pokemons/{{p.pokemon.num}}.png" />
            </a>
            <p class="captalize">{{p.pokemon.name}}</p>
            <small>Level: {{p.level}}</small><br>
            <small *ngIf="p.hp > 0">HP: {{p.hp}}</small>
            <small *ngIf="p.hp <= 0" style="color: red">HP: Defeat</small>
        </div>
    </div>
    <div *ngIf="challenger.pokemon && challenger.pokemon.hp > 0" class="center">
        <button (click)="pokemonPanel = false" pButton class="ui-button-warning ui-button-rounded" label="Sair"></button>
    </div>
</p-dialog>
<p-dialog [(visible)]="itemsPanel" [baseZIndex]="900">
    <p-tabView>
        <p-tabPanel header="Pokeballs">
            <div *ngIf="getPokeballs().length > 0" class="ui-g">
                <div *ngFor="let item of getPokeballs()" class="ui-g-4 choose center">
                    <a (click)="catchPokemon(item)">
                        <img class="item-bag" src="/assets/items/{{item.item.nemotecnico}}.png" />
                    </a>
                    <p class="captalize">{{item.item.name}}</p>
                    <p>x {{item.amount}}</p>
                </div>
            </div>
            <p  *ngIf="getPokeballs().length == 0">Ops, não tem nada aqui!</p>
        </p-tabPanel>
        <p-tabPanel header="Potions">
            <div *ngIf="getPotions().length > 0" class="ui-g">
                <div *ngFor="let item of getPotions()" class="ui-g-4 choose center">
                    <a (click)="heal(item)">
                        <img class="item-bag" src="/assets/items/{{item.item.nemotecnico}}.png" />
                    </a>
                    <p>{{item.item.name}}</p>
                    <p>x {{item.amount}}</p>
                </div>
            </div>
            <p  *ngIf="getPotions().length == 0">Ops, não tem nada aqui!</p>
        </p-tabPanel>
    </p-tabView>
</p-dialog>