<p-sidebar [showCloseIcon]="false"  [style]="{paddingTop: '30px'}" [(visible)]="battlePanel" [fullScreen]="true" class="battle-panel" [baseZIndex]="800">
    <div class="arena">
        <div class="ui-g">
            <div class="ui-g-7 right">
                <div class="life-panel">
                    <p class="captalize">{{oponent?.pokemon?.pokemon?.name || ''}}</p>
                    <p>Level: {{oponent?.pokemon?.level || ''}}</p>
                    <p>{{oponent?.pokemon?.hp}} / {{oponent?.pokemon?.maxHp}}</p>
                    <p-progressBar class="life-bar" [value]="((100/oponent?.pokemon?.maxHp)*oponent?.pokemon?.hp)"></p-progressBar>
                </div>
            </div>
            <div class="ui-g-5 right">
                <img class="pokemon-in-battle" src="/assets/pokemons/{{oponent?.pokemon?.pokemon?.num || '001'}}.png">
            </div>
            <div class="ui-g-5 left">
                <img class="pokemon-in-battle" src="/assets/pokemons/{{challenger?.pokemon?.pokemon?.num || '001'}}.png">
            </div>
            <div class="ui-g-7 left">
                <div class="life-panel">
                    <p class="captalize">{{challenger?.pokemon?.pokemon?.name || ''}}</p>
                    <p>Level: {{challenger?.pokemon?.level || ''}}</p>
                    <p>{{challenger?.pokemon?.hp}} / {{challenger?.pokemon?.maxHp}}</p>
                    <p-progressBar class="life-bar" [value]="((100/challenger?.pokemon?.maxHp)*challenger?.pokemon?.hp)"></p-progressBar>
                </div>
            </div>
        </div>
    </div>
    <div class="down-panel">
        <div class="ui-g">
            <div class="ui-g-6 center">
                <button pButton *ngIf="!attacking" (click)="attackPanels.toggle($event)" class="ui-button-danger ui-button-rounded" label="Atacar"></button>
                <button pButton *ngIf="attacking" class="ui-button-danger ui-button-rounded" label="Atacar"></button>
            </div>
            <div class="ui-g-6 center">
                <button (click)="pokemonPanel = true" pButton class="ui-button-rounded" label="Pokemon"></button>
            </div>
            <div class="ui-g-6 center">
                <button (click)="itemsPanel = true" pButton class="ui-button-success ui-button-rounded" label="Items"></button>
            </div>
            <div class="ui-g-6 center">
                <button [disabled]="gym" pButton (click)="battlePanel = false" class="ui-button-gray ui-button-rounded" label="Fugir"></button>
            </div>
        </div>
    </div>
</p-sidebar>
<p-overlayPanel #attackPanels [style]="{'width': '100%'}" [baseZIndex]="900" >
    <div class="ui-g">
        <div *ngIf="challenger?.pokemon?.move1" class="ui-g-6 center">
            <a (click)="attack(challenger?.pokemon?.move1, attackPanels);" pButton class="ui-button-danger ui-button-rounded btnPower">
                <p class="uppercase">{{challenger?.pokemon?.move1?.name}}</p>
                <small>Power: {{challenger?.pokemon?.move1?.power}}</small><br>
                <small>Accuracy: {{challenger?.pokemon?.move1?.accuracy}}</small><br>
                <small>Type: {{challenger?.pokemon?.move1?.type?.name}}</small>
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move2" class="ui-g-6 center">
            <a  (click)="attack(challenger?.pokemon?.move2, attackPanels);" pButton class="ui-button-danger ui-button-rounded btnPower">
                <p class="uppercase">{{challenger?.pokemon?.move2?.name}}</p>
                <small>Power: {{challenger?.pokemon?.move2?.power}}</small><br>
                <small>Accuracy: {{challenger?.pokemon?.move2?.accuracy}}</small><br>
                <small>Type: {{challenger?.pokemon?.move2?.type?.name}}</small>
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move3" class="ui-g-6 center">
            <a  (click)="attack(challenger?.pokemon?.move3, attackPanels);"  pButton class="ui-button-danger ui-button-rounded btnPower">
                <p class="uppercase">{{challenger?.pokemon?.move3?.name}}</p>
                <small>Power: {{challenger?.pokemon?.move3?.power}}</small><br>
                <small>Accuracy: {{challenger?.pokemon?.move3?.accuracy}}</small><br>
                <small>Type: {{challenger?.pokemon?.move3?.type?.name}}</small>
            </a>
        </div>
        <div *ngIf="challenger?.pokemon?.move4" class="ui-g-6 center">
            <a (click)="attack(challenger?.pokemon?.move4, attackPanels);" pButton class="ui-button-danger ui-button-rounded btnPower">
                <p class="uppercase">{{challenger?.pokemon?.move4?.name}}</p>
                <small>Power: {{challenger?.pokemon?.move4?.power}}</small><br>
                <small>Accuracy: {{challenger?.pokemon?.move4?.accuracy}}</small><br>
                <small>Type: {{challenger?.pokemon?.move4?.type?.name}}</small>
            </a>
        </div>
    </div>
</p-overlayPanel>
<p-dialog [(visible)]="pokemonPanel" [baseZIndex]="900" [closeIcon]="false">
    <div class="ui-g">
        <div *ngFor="let p of challenger.team" class="ui-g-4 choose center">
            <a *ngIf="p.hp > 0" (click)="changePokemon(p)">
                <img class="pokemon-pokedex" src="/assets/pokemons/{{p.pokemon.num}}.png" />
            </a>
            <a *ngIf="p.hp <= 0">
                <img class="pokemon-pokedex" src="/assets/pokemons/{{p.pokemon.num}}.png" />
            </a>
            <p class="captalize">{{p.pokemon.name}}</p>
            <small>Level: {{p.level}}</small><br>
            <small *ngIf="p.hp > 0">HP: {{p.hp}}</small>
            <small *ngIf="p.hp <= 0" style="color: red">HP: Defeat</small>
        </div>
    </div>
    <div *ngIf="challenger.pokemon && challenger.pokemon.hp > 0" class="center">
        <button (click)="pokemonPanel = false" pButton class="ui-button-warning ui-button-rounded" label="Sair"></button>
    </div>
</p-dialog>
<p-dialog [(visible)]="itemsPanel" [baseZIndex]="900">
    <p-tabView>
        <p-tabPanel header="Pokeballs">
            <div *ngIf="getPokeballs().length > 0" class="ui-g">
                <div *ngFor="let item of getPokeballs()" class="ui-g-4 choose center">
                    <a (click)="catchPokemon(item)">
                        <img class="item-bag" src="/assets/items/{{item.item.nemotecnico}}.png" />
                    </a>
                    <p class="captalize">{{item.item.name}}</p>
                    <p>x {{item.amount}}</p>
                </div>
            </div>
            <p  *ngIf="getPokeballs().length == 0">Ops, não tem nada aqui!</p>
        </p-tabPanel>
        <p-tabPanel header="Potions">
            <div *ngIf="getPotions().length > 0" class="ui-g">
                <div *ngFor="let item of getPotions()" class="ui-g-4 choose center">
                    <a (click)="heal(item)">
                        <img class="item-bag" src="/assets/items/{{item.item.nemotecnico}}.png" />
                    </a>
                    <p>{{item.item.name}}</p>
                    <p>x {{item.amount}}</p>
                </div>
            </div>
            <p  *ngIf="getPotions().length == 0">Ops, não tem nada aqui!</p>
        </p-tabPanel>
    </p-tabView>
</p-dialog>